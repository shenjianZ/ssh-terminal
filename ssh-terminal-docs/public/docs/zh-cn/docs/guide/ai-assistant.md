# AI 智能助手

SSH Terminal 内置强大的 AI 智能助手，帮助你更高效地管理服务器和执行命令。

---

## AI 助手简介

AI 智能助手集成了多个 AI 服务提供商，提供以下核心功能：
- 解释复杂的 Shell 命令
- 将自然语言转换为可执行的命令
- 诊断和解决错误
- 实时流式对话

**支持的 AI Provider：**
- OpenAI (GPT-4, GPT-3.5)
- Ollama (本地大模型)
- Qwen (通义千问)
- 文心一言 (百度)
- DeepSeek
- 其他兼容 OpenAI API 的服务

---

## 配置 AI Provider

### 添加 AI Provider

1. 打开设置页面，切换到"AI"标签
2. 点击"添加新服务"按钮
3. 选择服务形式（需要APIKey，不需要APIKey）
4. 填写配置信息：
   - **服务名称** - 自定义名称（如 "OpenAI GPT-4"）
   - **API Key** - 服务商提供的 API 密钥
   - **Base URL** - API 端点地址（Ollama 本地使用 `http://localhost:11434`）
   - **模型名称** - 要使用的模型（如 `gpt-4`、`qwen-turbo`）
5. 点击"测试连接"验证配置
6. 点击"保存"完成配置

### Ollama 本地配置

如果你想使用本地 Ollama 模型：

1. 安装 Ollama：`ollama pull qwen`
2. 在 SSH Terminal 中添加 Ollama Provider：
   - Base URL: `http://localhost:11434`
   - 模型名称: `qwen`（或其他已下载的模型）
   - API Key: 可以留空

**优势：**
- 完全本地运行，数据不离开你的电脑
- 无需支付 API 费用
- 支持多种开源模型

### 设置默认 Provider

配置多个 Provider 后，可以设置其中一个为默认 Provider：
- 在设置页面的"默认AI服务中"选择一个启用的服务作为默认服务

---

## 核心功能

### 命令解释

当你遇到不熟悉的 Shell 命令时，可以让 AI 助手解释它的含义。

**使用方法：**
1. 在终端中选中要解释的命令文本
2. 按 `Ctrl+Shift+E`（或在设置中自定义）
3. AI 会返回详细的解释，包括：
   - 命令的作用
   - 每个参数的含义
   - 使用示例
   - 注意事项

**示例：**
```
命令: ps aux | grep nginx

解释: 这个命令用于查找运行中的 nginx 进程
- ps aux: 显示所有进程的详细信息
- |: 管道，将前一个命令的输出传递给下一个命令
- grep nginx: 过滤包含 "nginx" 的行
```

### 自然语言转命令

用自然语言描述你想要做的事情，AI 会生成对应的命令。

**使用方法：**
1. 按 `Ctrl+Shift+#`（或在设置中自定义）
2. 输入你的需求（中文或英文）
3. AI 会返回推荐的命令

**示例：**
```
输入: 查看系统内存使用情况

AI 推荐: free -h

输入: 查找占用端口 8080 的进程

AI 推荐: lsof -i :8080
```

### 错误诊断

遇到错误时，让 AI 帮你分析原因和解决方案。

**使用方法：**
1. 按 `Ctrl+Shift+A`（或在设置中自定义）
2. 输入错误信息或选中错误文本
3. AI 会分析可能的原因并提供解决方案

**示例：**
```
错误: Permission denied when trying to delete a file

AI 分析:
可能的原因:
1. 文件权限不足
2. 文件被其他进程占用
3. 文件系统只读

解决方案:
1. 使用 sudo 提升权限
2. 检查并关闭占用文件的进程
3. 检查文件系统挂载选项
```

### 流式对话

与 AI 进行实时对话，获取更深入的帮助。

**使用方法：**
1. 点击侧边栏的"AI 助手"图标（在活跃终端，使用Ctrl+Shift+I）
2. 在聊天框中输入你的问题
3. AI 会实时返回答案，支持流式输出

**使用场景：**
- 寻求技术建议
- 代码审查和优化
- 学习新的技术概念
- 解决复杂的技术问题

---

## 对话历史管理

### 自动保存

AI 助手会自动保存每个连接的对话历史：
- 每个终端连接有独立的对话历史
- 对话按服务器分组存储
- 支持查看历史对话记录

### 查看历史

1. 在 AI 助手页面，左侧显示按服务器分组的历史记录
2. 点击服务器名称查看该服务器的所有对话
3. 点击具体的对话记录加载完整内容

### 清除历史

你可以清除特定连接的对话历史：
- 在 AI 助手页面，选择要清除的连接
- 点击删除图标按钮

---

## AI 缓存机制

SSH Terminal 内置智能缓存系统，显著提升 AI 响应速度。

### 工作原理

- 相同的配置自动复用，无需重复创建
- 配置更改时自动清理旧缓存
- 缓存命中时响应速度提升 90%

### 性能对比

| 操作 | 无缓存 | 有缓存 | 提升 |
|------|--------|--------|------|
| 首次调用 | ~500ms | ~500ms | - |
| 后续调用 | ~500ms/次 | ~50ms/次 | ⚡ 90% ↑ |

### 监控缓存

你可以在设置页面的 AI 标签中查看缓存信息：
- 当前缓存的 Provider 数量
- 缓存命中情况
- 性能指标

---

## 下一步

现在你已经掌握了 AI 助手的使用方法，可以继续学习：

- [基础教程](/docs/guide/basics) - 回顾基础操作
- [SSH 连接管理](/docs/guide/ssh-connection) - 管理你的服务器连接
- [SFTP 文件管理](/docs/guide/sftp) - 高效管理远程文件
- [云同步](/docs/guide/cloud-sync) - 同步配置到云端
